{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "WooCommerce Order AI Action Schema",
  "type": "object",
  "description": "Used for AI-driven analysis and response actions during WooCommerce order processing.",
  "properties": {
    "orderId": {
      "type": "string",
      "description": "Unique identifier for the WooCommerce order."
    },
    "customerDetails": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "Full name of the customer."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "Email address of the customer."
        },
        "phone": {
          "type": "string",
          "description": "Contact phone number of the customer."
        },
        "shippingAddress": {
          "type": "object",
          "properties": {
            "addressLine1": {
              "type": "string",
              "description": "First line of the shipping address."
            },
            "addressLine2": {
              "type": "string",
              "description": "Second line of the shipping address, if applicable."
            },
            "city": {
              "type": "string",
              "description": "City for shipping."
            },
            "state": {
              "type": "string",
              "description": "State or region for shipping."
            },
            "postalCode": {
              "type": "string",
              "description": "Postal or ZIP code."
            },
            "country": {
              "type": "string",
              "description": "Country for shipping."
            }
          },
          "required": ["addressLine1", "city", "state", "postalCode", "country"]
        }
      },
      "required": ["name", "email", "shippingAddress"]
    },
    "orderItems": {
      "type": "array",
      "description": "List of items in the order.",
      "items": {
        "type": "object",
        "properties": {
          "productId": {
            "type": "string",
            "description": "Identifier for the product."
          },
          "quantity": {
            "type": "integer",
            "description": "Quantity of the product ordered."
          },
          "price": {
            "type": "number",
            "description": "Unit price of the product."
          }
        },
        "required": ["productId", "quantity", "price"]
      }
    },
    "paymentDetails": {
      "type": "object",
      "properties": {
        "method": {
          "type": "string",
          "description": "Payment method used for the order."
        },
        "transactionId": {
          "type": "string",
          "description": "Unique transaction identifier."
        }
      },
      "required": ["method", "transactionId"]
    },
    "analysis": {
      "type": "object",
      "description": "AI-generated insights based on the order data.",
      "properties": {
        "isAddressCorrected": {
          "type": "boolean",
          "description": "Indicates if any address corrections were made."
        },
        "addressCorrections": {
          "type": "object",
          "description": "Corrected values, if applicable.",
          "properties": {
            "correctedAddressLine1": {
              "type": "string"
            },
            "correctedCity": {
              "type": "string"
            },
            "correctedPostalCode": {
              "type": "string"
            }
          }
        },
        "feedback": {
          "type": "string",
          "description": "Feedback or notes generated from order analysis."
        }
      }
    },
    "actions": {
      "type": "object",
      "description": "Actions determined by AI to be taken on this order.",
      "properties": {
        "sendEmailToCustomer": {
          "type": "boolean",
          "description": "Whether to notify the customer via email."
        },
        "sendEmailToAdmin": {
          "type": "boolean",
          "description": "Whether to notify the site admin via email."
        },
        "emailContent": {
          "type": "object",
          "description": "Custom email content to be sent.",
          "properties": {
            "customerEmail": {
              "type": "string",
              "description": "Email body/content for the customer."
            },
            "adminEmail": {
              "type": "string",
              "description": "Email body/content for the admin."
            }
          },
          "required": ["customerEmail", "adminEmail"]
        }
      },
      "required": ["sendEmailToCustomer", "sendEmailToAdmin"]
    }
  },
  "required": [
    "orderId",
    "customerDetails",
    "orderItems",
    "paymentDetails",
    "analysis",
    "actions"
  ]
}
